# Управление процессами
## Задача:
 - скрипт запускающий 2 процесса с разными ionice, замеряющий время выполнения и лог консоли
 - скрипт запускающий 2 процесса с разными nice и замеряющий время выполнения и лог консоли
### NICE
Когда на компьютере достаточно процессорного времени на исполнение всех процессов, нет необходимости в выставлении приоритетов. Но когда необходимо параллельно запустить несколько процессов, каждый из которых использует всё доступное процессорное время, может очень пригодиться утилита nice.

Команда nice запускает программу с изменённым приоритетом для планироващика задач. Слово «nice» в английском языке обозначает, в частности, «вежливый». По этимологии этой команды процесс с большим значением nice — более вежлив к другим процессам, позволяя им использовать больше процессорного времени, поскольку он сам имеет меньший приоритет (и, следовательно, большее «значение вежливости» — niceness value).

Наибольший приоритет (и наименьшее значение nice) — −20. 19, либо 20 — наименьший приоритет, но это, с другой стороны, самые вежливые процессы.

### IONICE

Программа задаёт класс и приоритет ввода/вывода для процесса. На момент написания документации операционная система Linux поддерживает три класса ввода/вывода:

Idle. Процесс, имеющий класс idle, сможет получить доступ к диску только тогда, когда другие программы не хотят к нему обращаться. Потери производительности ввода/вывода от таких процессов при нормальной работе системы должны быть нулевыми. Для этого класса не задаются никакие дополнительные приоритеты.

Best effort. Этот класс используется по умолчанию всеми процессами, которым явным образом не был задан другой приоритет ввода/вывода. Для вычисления приоритета ввода/вывода процессов используются значения CPU nice для этих процессов. Классу можно передавать параметр-приоритет, который должен быть в диапазоне 0-7; меньшие числа обозначают больший приоритет. Программы, которые работают с одинаковым приоритетом и классом "best effort", обслуживаются просто по очереди (round-robin).

Real time. Процессы имеющие класс ввода/вывода RT получают доступ к жёсткому диску первым делом, независимо от того, что ещё происходит в системе. Класс RT нужно использовать с большой осторожностью, потому что с его помощью можно лишить возможности работать с диском другие процессы. Как и в случае с классом "best effort", для этого класса есть 8 уровней приоритета, определяющих насколько много будет выделено времени процессу для ввода/вывода, когда наступит его очередь.

Если аргументы не заданы, или если задана только опция -p, ionice покажет класс и приоритет ввода/вывода для текущего процесса.

[править]Опции
-c
Класс. 1 для "real time", 2 для "best-effort", 3 для "idle".
-n
Параметр класса, если он допустим. Для классов real time и best-effort допустимые значения: 0-7.
-p
Идентификатор процесса, если нужно перенастроить уже работающий процесс. Если аргумент не задан, ionice запустит заданную программу с указанными параметрами.

### SCRIPT
```
#!/bin/bash
exec > output 2>&1
sudo ionice -c 3 time -f "Название:%C\nВремя выполнения:%e" nice sleep 10 &
sudo time -f "Название:%C\nВремя выполнения:%e" nice -n -11 sleep 11 &
sleep 1s && ps -axl | grep sleep &
sleep 2s && iotop -b -n 1 | grep sleep &

```
содержание файла output:
```
4     0    4085       1  20   0  17148  7168 do_pol S    pts/1      0:00 sudo ionice -c 3 time -f Название:%C\nВремя выполнения:%e nice sleep 10
4     0    4086       1  20   0  17144  7168 do_pol S    pts/1      0:00 sudo time -f Название:%C\nВремя выполнения:%e nice -n -11 sleep 11
0     0    4090    4088  20   0   5684  1920 hrtime S    pts/1      0:00 sleep 2s
1     0    4091    4086  20   0  17144  2492 do_pol Ss+  pts/2      0:00 sudo time -f Название:%C\nВремя выполнения:%e nice -n -11 sleep 11
1     0    4092    4085  20   0  17148  2496 do_pol Ss+  pts/3      0:00 sudo ionice -c 3 time -f Название:%C\nВремя выполнения:%e nice sleep 10
4     0    4093    4092  20   0   2560  1280 do_wai S    pts/3      0:00 time -f Название:%C\nВремя выполнения:%e nice sleep 10
4     0    4094    4091  20   0   2560  1280 do_wai S    pts/2      0:00 time -f Название:%C\nВремя выполнения:%e nice -n -11 sleep 11
4     0    4095    4094   9 -11   5684  1920 hrtime S<   pts/2      0:00 sleep 11
0     0    4096    4093  30  10   5684  1920 hrtime SN   pts/3      0:00 sleep 10
4     0    4098    4087  20   0   6544  2304 pipe_r S    pts/1      0:00 grep sleep
   4085 be/4 root        0.00 B/s    0.00 B/s ?unavailable?  sudo ionice -c 3 time -f Название:%C\nВремя выполнения:%e nice sleep 10
   4086 be/4 root        0.00 B/s    0.00 B/s ?unavailable?  sudo time -f Название:%C\nВремя выполнения:%e nice -n -11 sleep 11
   4091 be/4 root        0.00 B/s    0.00 B/s ?unavailable?  sudo time -f Название:%C\nВремя выполнения:%e nice -n -11 sleep 11
   4092 be/4 root        0.00 B/s    0.00 B/s ?unavailable?  sudo ionice -c 3 time -f Название:%C\nВремя выполнения:%e nice sleep 10
   4093 idle root        0.00 B/s    0.00 B/s ?unavailable?  time -f Название:%C\nВремя выполнения:%e nice sleep 10
   4094 be/4 root        0.00 B/s    0.00 B/s ?unavailable?  time -f Название:%C\nВремя выполнения:%e nice -n -11 sleep 11
   4095 be/1 root        0.00 B/s    0.00 B/s ?unavailable?  sleep 11
   4096 idle root        0.00 B/s    0.00 B/s ?unavailable?  sleep 10
   4100 be/4 root        0.00 B/s    0.00 B/s ?unavailable?  grep sleep
Название:nice sleep 10
Время выполнения:10.02
Название:nice -n -11 sleep 11
Время выполнения:11.02
```
